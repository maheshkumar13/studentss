<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
<style>
div.dataTables_wrapper div.dataTables_filter input {
	border: none !important;
	background: url(../assets/layouts/layout4/img/Search-icon.png) 95%
		no-repeat #F1F3F4 !important;
	height: 38px;
	/* box-shadow: 0 1px 2px 0 rgba(0,0,0,.1);*/
	width: 300px;
	border-radius: 40px !important;
}

div.dataTables_wrapper div.dataTables_filter input:hover {
	/*box-shadow: 0 5px 15px 0 rgba(0,0,0,.1);*/
	background: url(../assets/layouts/layout4/img/Search-icon.png) 95%
		no-repeat #e8eaed !important;
}

::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
	color: #80868b !important;
	opacity: 1; /* Firefox */
}

::-ms-input-placeholder { /* Internet Explorer 10-11 */
	color: #80868b !important;
}

::-ms-input-placeholder { /* Microsoft Edge */
	color: #80868b !important;
}

/*.dt-buttons button { background:#4285f4; border:1px solid #4285f4; color:#fff; padding:7px 8px; border-radius:40px}*/
.dt-buttons button {
	-webkit-box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.3);
	box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.3);
	border-radius: 40px;
	padding: 7px 15px;
	border: 1px solid #4285f4;
	color: #fff;
	background-color: #4285f4;
	transition: 0.2s;
	text-align: center;
	transform: scale(0.90);
	box-shadow: 0 2px 15px 0 rgba(0, 0, 0, 0.3);
	cursor: pointer;
	background-color: lighten(#4285f4, 10%);
	box-shadow: 0 6px 10px 0 rgba(0, 0, 0, 0.3);
	margin-bottom: 10px
}

.dt-buttons button:hover {
	-webkit-box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.3);
	box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.3);
	box-shadow: 0 3px 5px 0 rgba(0, 0, 0, 0.3);
}

.dt-buttons button i {
	margin-right: 7px
}

.dataTables_length {
	display: inline-block;
	float: left
}

.dataTables_filter {
	display: inline-block;
	float: right
}

.dt-buttons {
	float: left !important
}

.table thead tr {
	background: #efefef
}

label {
	font-weight: normal;
	margin-bottom: 0;
}

@media ( min-width :320px) and (max-width:768px) {
	.dt-buttons button i {
		margin-right: 0
	}
	.dt-buttons button {
		border-radius: 50%;
		width: 40px;
		height: 40px;
		padding: 0;
	}
}
</style>

<style>
/****************WIZARD***********************/
.form-wizard .steps {
	padding: 0;
	margin-bottom: 5px;
}

.custom-well .form-group {
	margin: 0px !important;
	margin-bottom: 15px !important;
}

.custom-well {
	box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)
		!important;
	background: #ffffff;
	padding: 0 20px !important;
	margin-top: 20px;
	border-radius: 4px !important
}

.form-wizard .steps>li>a {
	color: #999999;
	padding: 10px 10px;
	white-space: nowrap;
	background-image: linear-gradient(#e7eef1, #ffffff) !important;
	margin-right: 2px;
	font-weight: normal !important;
	/*border:1px solid #dddddd !important; */
}

.form-wizard .steps>li>a:hover {
	background-color: #f1f1f1 !important;
	color: #666;
}

.form-wizard .steps>li.active>a {
	color: #659be0;
	cursor: default;
	border-top: 3px solid #FF4848 !important;
	background-image: linear-gradient(#ffffff, #ffffff) !important;
	border-bottom: 1px solid #ffffff !important
}

.form-wizard .steps {
	border-bottom: 1px solid #dddddd !important;
}
</style>
</head>
<body>
	<div class="row">
		<div class="col-md-12">
			<div class="portlet light bordered" id="form_wizard_1">
				<div class="portlet-title">
					<div class="caption">
						<i class="fa fa-files-o"></i> <span
							class="caption-subject font-green bold uppercase">
							North Application Sale </span>
					</div>
					<div class="actions">
						<a title=""
							class="btn btn-circle btn-icon-only btn-default fullscreen"
							href="#" data-original-title=""> </a> <a
							class="btn btn-circle btn-icon-only btn-default"
							href="javascript:;"> <i class="icon-wrench"></i>
						</a> <a class="btn btn-circle btn-icon-only btn-default"
							href="javascript:;"> <i class="icon-trash"></i>
						</a>
					</div>
				</div>
				<div class="portlet-body form">
					<form action="">
						<div class="row">
							<div class="col-md-12">
								<div class="col-md-2">
									<select class="form-control" id="academicId">
										<option value="">Select Academic Year</option>
										<th:block th:each="academic:${academics}">
											<option th:value="${academic.id}"
												th:text="${academic.academicYear}"></option>
										</th:block>
									</select>
								</div>
								<div class="col-md-2">
									<input type="text" class="form-control number"
										placeholder="Application No" maxlength="10" id="txtAppnos" />
								</div>
								<div class="col-md-2">
									<input type="text" class="form-control" placeholder="Surname"
										id="txtSurname" />
								</div>
								<div class="col-md-2">
									<input type="text" class="form-control"
										placeholder="Student Name" id="txtStudentName" />
								</div>
								<div class="col-md-2">
									<input type="text" class="form-control"
										placeholder="Parent Name" id="txtParentName" />
								</div>
								<div class="col-md-2">
									<button type="button" class="btn btn-info" id="searchBtnId">
										<span class="glyphicon glyphicon-search"></span>&nbsp;Search
									</button>
								</div>
							</div>
						</div>
					</form>
					<div class="clearfix"></div>
					<hr>
					<div class="clearfix"></div>
					<div id="studentsGridId" class="row"></div>
					<div id="applicationDivId" class="custom-well"></div>
				</div>
			</div>
		</div>
	</div>
	<th:block layout:fragment="scripts">
		<script>
			$("#searchBtnId")
					.click(
							function() {

								var sb = null;
								sb = document.getElementById("txtAppnos").value
										.trim()
										+ document.getElementById("txtSurname").value
												.trim()
										+ document
												.getElementById("txtStudentName").value
												.trim()
										+ document
												.getElementById("txtParentName").value
												.trim();

								if ($("#academicId").val() == "") {
									alert("Please Select Academic Year");
									$("#academicId").focus();
									return false;
								} else if (sb == "") {
									alert("Please enter the any fileds");
									document.getElementById("txtAppnos")
											.focus();
									return false;
								} else if (isNaN(document
										.getElementById("txtAppnos").value
										.trim())) {
									alert("Please Enter Numerics Only For Application No");
									document.getElementById("txtAppnos").value = '';
									document.getElementById("txtAppnos")
											.focus();
									return false;
								}
								if ($('#txtAppnos').val() != ""
										&& $('#txtAppnos').val().length < 9) {
									alert("Please enter full application no.");
									document.getElementById("txtAppnos")
											.focus();
									return false;
								} else {
									$("#studentsGridId").show();
									$
											.ajax({
												type : "GET",
												url : "/application/searchApplications",
												data : {
													academic : $("#academicId")
															.val(),
													appNo : $("#txtAppnos")
															.val(),
													surName : $("#txtSurname")
															.val(),
													studentName : $(
															"#txtStudentName")
															.val(),
													parentName : $(
															"#txtParentName")
															.val(),
													searchOption : "APP"
												},
												success : function(data) {
													$('#studentsGridId').html(
															data);
													$("#applicationDivId")
															.slideUp();
													$("#downId").show();
												},
												error : function(jqXHR,
														exception, textStatus) {
													alert('Uncaught Error.\n'
															+ jqXHR.responseText);

												},
											});
								}
							});

			function getAppDetails(appNo) {
				$.ajax({
					type : "GET",
					url : "/application/getApplicationInfo",
					data : {
						appNo : appNo,
						academic : $("#academicId").val()
					},
					success : function(data) {
						$("#applicationDivId").show();
						$('#applicationDivId').html(data);
						if($('#applicationDivId').is(":hidden")){
							$("#applicationDivId").show();
						}
						
						if($('#downId').is(":hidden")){
							$("#downId").show();
						}
						
					},
					error : function(jqXHR, exception, textStatus) {
						alert('Uncaught Error.\n' + jqXHR.responseText);
					},
				});

				$("#studentsGridId").slideUp();
			}

			$('.number').keyup(function(event) {
				if (isNaN($(this).val())) {
					showToastr("Please Enter Numericals", "error");
					$(this).val('');
				}
			});
		</script>
	</th:block>
</body>
</html>